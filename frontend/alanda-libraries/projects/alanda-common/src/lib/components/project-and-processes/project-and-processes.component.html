<p-panel #tt [toggleable]="true" (onAfterToggle)="loadProjectAndProcesses(tt.collapsed)">
  <p-header>
    <span class="ui-panel-title title">Projects & Processes</span>
  </p-header>
  <p-treeTable [autoLayout]="true"  [loading]="loading" [value]="treeStructure">
    <ng-template pTemplate="header">
        <tr>
            <th>Process / Task</th>
            <th>Ref. Object</th>
            <th>Assignment</th>
            <th>Start</th>
            <th>End</th>
            <th>Comments</th>
            <th>Action</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowNode let-rowData="rowData">
      <tr *ngIf="rowData.type !== 'new-process'">
        <td [ngStyle]="{'font-weight':rowData.type === 'project' ? '700' : '400' }">
          <p-treeTableToggler [rowNode]="rowNode"></p-treeTableToggler>
          <span [ngClass]="getIconClass(rowData.type)"></span>
          <a *ngIf="rowData.routerLink" [routerLink]="rowData.routerLink"> {{rowData.label}}</a>
          <span *ngIf="!rowData.routerLink"> {{rowData.label}}</span>
        </td>
        <td>{{rowData.refObject}}</td>
        <td>{{rowData.assignee}}</td>
        <td>{{rowData.start}}</td>
        <td>{{rowData.end}}</td>
        <td>{{rowData.comment}}</td>
        <td>
          <alanda-pap-actions [data]="rowData" (changeEvent)="loadProjectAndProcesses()"></alanda-pap-actions>
        </td>
      </tr>
      <!-- <tr *ngIf="rowData.type === 'new-process'">
        <td>
          <p-dropdown #selectSubprocess [style]="{'width':'100%'}" [options]="allowedProcesses[rowData.relatedProject.guid]"
          (onChange)="onSubprocessSelected(rowData, selectSubprocess.value)" [(ngModel)]="rowData.value" placeholder="Select Process"
          optionLabel="label"></p-dropdown>
        </td>
        <td>
          <p-dropdown [style]="{'width':'100%'}" [disabled]="true" [options]="" placeholder="Reference Object" optionLabel=""></p-dropdown>
        </td>
        <td colspan="4">
          <input [style]="{'width':'100%'}" type="text" placeholder="Details" [disabled]="true" pInputText />
        </td>
        <td><alanda-pap-actions [data]="rowData" (changeEvent)="loadProjectAndProcesses()"></alanda-pap-actions></td>
      </tr> -->
    </ng-template>
  </p-treeTable>
</p-panel>
