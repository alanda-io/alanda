<style>
  .ui-picklist-item{
    word-break: break-all;
  }

  .inputField{
    margin-top: 20px;
    margin-bottom: 20px;
  }

  .ui-panel {
    margin-top: 20px;
  }
</style>

<p-panel>
  <p-header>Permission Management</p-header>
  <div class="p-grid ui-fluid">

    <!-- Group Table-->

    <div class="p-col-12 p-md-4">
      <p-table #table [value]="permissions" [columns]="permissionColumns" dataKey="guid" [paginator]="true" [rows]="15"
               [totalRecords]="totalRecords" [lazy]="true" [loading]="loading" (onRowUnselect)="onPermissionUnselected()"
               [autoLayout]="true" selectionMode="single" scrollHeight="320px" (onRowSelect)="onPermissionSelected($event)"
               [style]="{'font-size': '12px'}" (onLazyLoad)="onLoadPermissions($event)">
        <ng-template pTemplate="header" let-columns>
          <tr>
            <th *ngFor="let col of columns" [pSortableColumn]="col.field">
              <strong>{{col.header}}</strong>
              <p-sortIcon [field]="col.field"></p-sortIcon>
            </th>
          </tr>
          <tr>
            <th *ngFor="let col of columns">
              <input pInputText type="text" (input)="table.filter($event.target.value, col.field, col.filterMatchMode)" style="padding: 0.3em">
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-permission let-columns="columns">
          <tr [pSelectableRow]="permission">
            <td *ngFor="let col of columns">
              {{permission[col.field]}}
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>

    <!-- Group Table-->

    <div class="p-col-12 p-md-8">
      <p-tabView>
        <p-tabPanel header="General">
          <div class="p-grid">
            <div class="p-col-4">
              <form (ngSubmit)="onFormSubmit()" [formGroup]="permissionForm">

                <div class="inputField">
                  <span class="ui-float-label">
                    <input id="input-guid" type="text" pInputText formControlName="key">
                    <label for="input-guid">Permission key</label>
                  </span>
                  <span *ngIf="permissionForm.dirty && !permissionForm.get('key').valid" style="font-size: 10px; color: red">Please enter a permission key</span>
                </div>

                <div class="p-grid">
                  <div class="p-col-12 p-md-6">
                    <button pButton type="submit" [label]="selectedPermission ? 'Update Permission' : 'Create Permission'"></button>
                  </div>
                </div>

              </form>
            </div>
          </div>
        </p-tabPanel>
      </p-tabView>
    </div>
  </div>
</p-panel>
