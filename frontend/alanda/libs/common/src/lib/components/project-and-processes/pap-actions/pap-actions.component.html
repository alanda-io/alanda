<ng-container [ngSwitch]="data.type">
  <ng-container *ngSwitchCase="'project'">
    <p-menu #menu [popup]="true" [model]="optionItems" appendTo="body"></p-menu>
    <span
      class="fa fa-cog fa-lg option-action-icon"
      (click)="menu.toggle($event)"
    ></span>
    <span
      class="fa fa-stop fa-lg stop-action-icon"
      (click)="cancelType = 'project'; displayCancelDialog = true"
    ></span>
    <span>{{ data.value.status }}</span>
  </ng-container>

  <ng-container *ngSwitchCase="'child'">
    <p-menu #menu [popup]="true" [model]="optionItems" appendTo="body"></p-menu>
    <span
      class="fa fa-cog fa-lg option-action-icon"
      (click)="menu.toggle($event)"
    ></span>
    <span
      class="fa fa-stop fa-lg stop-action-icon"
      (click)="cancelType = 'project'; displayCancelDialog = true"
    ></span>
    <span>{{ data.value.status }}</span>
  </ng-container>

  <ng-container *ngSwitchCase="'process'">
    <span
      [hidden]=""
      class="fa fa-stop fa-lg stop-action-icon"
      (click)="cancelType = 'process'; displayCancelDialog = true"
    ></span>
    <span>{{ data.value.status }}</span>
  </ng-container>

  <ng-container *ngSwitchCase="'new-process'">
    <span *ngIf="data.label" class="fa fa-play fa-lg play-action-icon"></span>
    <span
      *ngIf="data.label"
      class="fa fa-times fa-lg remove-action-icon"
    ></span>
    <span *ngIf="data.label">NEW</span>
  </ng-container>
</ng-container>

<ng-container *ngIf="cancelType === 'project'; else cancelProcessDialog">
  <p-dialog [(visible)]="displayCancelDialog" [modal]="true">
    <p-header> Cancel {{ this.data.value.projectId }} </p-header>
    <p>
      Are you sure to cancel project {{ data.value?.projectId }}? All progress
      will be lost !
    </p>
    <input
      type="text"
      id="cancelReason"
      #cancelProjectReason
      pInputText
      placeholder="Reason for canceling the project"
    />
    <p-footer>
      <button
        pButton
        label="Cancel"
        class="ui-button-secondary"
        (click)="displayCancelDialog = false"
      ></button>
      <button
        pButton
        label="OK"
        (click)="onCancelClick(cancelProjectReason)"
      ></button>
    </p-footer>
  </p-dialog>
</ng-container>

<ng-template #cancelProcessDialog>
  <p-dialog [(visible)]="displayCancelDialog" [modal]="true">
    <p-header>
      Cancel Process
    </p-header>
    Are you sure to cancel {{ data.value?.processName }}? All progress will be
    lost !
    <input
      type="text"
      id="cancelReason"
      #cancelProcessReason
      pInputText
      placeholder="Reason for canceling the process"
    />
    <p-footer>
      <button
        pButton
        type="button"
        label="Cancel"
        class="ui-button-secondary"
        (click)="displayCancelDialog = false"
      ></button>
      <button
        pButton
        type="button"
        label="OK"
        (click)="onCancelClick(cancelProcessReason)"
      ></button>
    </p-footer>
  </p-dialog>
</ng-template>
