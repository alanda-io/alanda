<ng-container *ngIf="state.select() | async as s">
  <!--
  <p-tabView [activeIndex]="activeTabIndex"
             (activeIndexChange)="updateTabIndex($event)">
    <p-tabPanel header="Project Overview" leftIcon="pi pi-bookmark">
      <ng-template pTemplate="content">
        <router-outlet></router-outlet>
      </ng-template>
    </p-tabPanel>
    <p-tabPanel header="PIO" leftIcon="pi pi-eye">
      <ng-template pTemplate="content">
        <alanda-pio-component [pid]="s.pid"></alanda-pio-component>
      </ng-template>
    </p-tabPanel>
    <p-tabPanel header="History Log" leftIcon="pi pi-clock">
      <ng-template pTemplate="content">
        <alanda-history-grid-component
          [projectGuid]="s.project.guid"
        ></alanda-history-grid-component>
      </ng-template>
    </p-tabPanel>
    <p-tabPanel header="People" leftIcon="pi pi-users">
      <ng-template pTemplate="content">
        People component WIP
      </ng-template>
    </p-tabPanel>
  </p-tabView>
  -->

  <p-tabView [hidden]="true"></p-tabView>

  <div class="p-tabview p-component phase-tabview" #phaseTab>
    <ul role="tablist" class="p-tabview-nav">
      <li
        role="presentation"
        *ngFor="let tab of s.pageTabs; let i = index"
        [ngClass]="{
          'p-highlight': tab.name === s.activePageTab.name
        }"
        [pTooltip]="
          tab.phase ? getPhaseStatus(tab.phase).label.toUpperCase() : tab.name
        "
        tooltipPosition="top"
      >
        <a
          role="tab"
          class="p-tabview-nav-link p-ripple"
          (click)="activePageTabChangeEvent.next(tab)"
        >
          <i
            [ngClass]="[
              'nav-icons',
              tab.phase ? getPhaseStatus(tab.phase).styleClass : tab.icon
            ]"
          ></i>
          <span>{{ tab.name }}</span>
          <ng-container *ngIf="!!tab.phase && !isReadOnly(tab.phase)">
            <i
              class="pi pi-angle-down phase-tab-menu"
              (click)="toggleMenu($event)"
            ></i>
            <p-menu
              #menu
              [popup]="true"
              [model]="getMenuItems(tab.phase)"
              [appendTo]="phaseTab"
            ></p-menu>
          </ng-container>
        </a>
      </li>
    </ul>

    <div class="p-tabview-panels">
      <div class="p-tabview-panel">
        <ng-content></ng-content>
      </div>
    </div>
  </div>
</ng-container>
