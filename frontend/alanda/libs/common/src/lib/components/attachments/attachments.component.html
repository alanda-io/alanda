<p-panel [toggleable]="true" [collapsed]="true" (onAfterToggle)="togglePanel()">
  <p-header>
    <span class="ui-panel-title">
      Attachments
      <alanda-badge label="{{ fileCount }}"></alanda-badge>
    </span>
  </p-header>
  <div class="p-grid">
    <div class="p-col-3">
      <alanda-attachments-tree
        [treeNode]="treeNode"
        (nodeChangedEvent)="onSelectedNodeChange($event)"
      ></alanda-attachments-tree>
    </div>
    <div class="p-col">
      <a [href]="downloadAllUrl">
        <p-button
          class="download-all"
          type="button"
          icon="fa fa-download"
          label="Download all"
          [disabled]="fileCount === 0"
        ></p-button>
      </a>
      <div class="p-grid">
        <div class="p-col-12 p-nogutter">
          <alanda-attachments-list
            [data]="data"
            [currentFiles]="currentFiles"
            (deleteFile)="onDeleteFile()"
          ></alanda-attachments-list>
        </div>
        <div class="p-col-12 p-md-12 p-nogutter">
          <p-fileUpload
            #fileUploader
            name="file"
            url="{{ uploaderUrl }}"
            multiple="multiple"
            (onUpload)="onUpload($event)"
            chooseLabel="Choose Files"
            auto="true"
            uploadLabel="Upload"
          >
            <ng-template pTemplate="content">
              <div>Drag files here to upload</div>
            </ng-template>
          </p-fileUpload>
        </div>
      </div>
    </div>
  </div>
</p-panel>
