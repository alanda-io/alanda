<p-card *ngIf="!showDialog">
  <form [formGroup]="formGroup" (ngSubmit)="onSubmit()">
    <div class="p-grid">
      <div class="p-col-12 p-md-6 p-lg-4">
        <div class="p-grid">
          <div class="p-col-4">
            <strong>Type (Sub Type):</strong>
          </div>
          <div class="p-col-7">
            <span *ngIf="project.subType">{{ project.subtype }}</span>
            <span *ngIf="!project.subType">{{
              project.pmcProjectType.name
            }}</span>
          </div>
          <div class="p-col-4">
            <strong>Prio*:</strong>
          </div>
          <div class="p-col-7">
            <p-dropdown
              [autoDisplayFirst]="false"
              formControlName="prio"
              [options]="[
                { label: '0 - Emergency', value: 0 },
                { label: '1 - Urgent', value: 1 },
                { label: '2 - Normal', value: 2 }
              ]"
              optionLabel="label"
              [appendTo]="'body'"
            ></p-dropdown>
          </div>
          <div class="p-col-4">
            <strong>Tag(s)*:</strong>
          </div>
          <div class="p-col-7">
            <p-dropdown
              [autoDisplayFirst]="false"
              [options]="allowedTagList"
              formControlName="tag"
              optionLabel="value"
              [appendTo]="'body'"
            ></p-dropdown>
          </div>
        </div>
      </div>

      <div class="p-col-12 p-md-6 p-lg-4">
        <div class="p-grid">
          <div class="p-col-4">
            <strong>Project Due Date:</strong>
          </div>
          <div class="p-col-7">
            <p-calendar
              formControlName="projectDueDate"
              [showIcon]="true"
              dataType="string"
              dateFormat="yy-mm-dd"
              [appendTo]="'body'"
            ></p-calendar>
          </div>
          <div class="p-col-4">
            <strong>Project Title*:</strong>
          </div>
          <div class="p-col-7">
            <input
              pInputText
              formControlName="projectTitle"
              type="text"
              value="{{ project.title }}"
            />
          </div>
        </div>
      </div>
      <div class="p-col-12 p-md-12 p-lg-4">
        <div class="p-grid">
          <div class="p-col-12">
            <textarea
              pInputTextarea
              maxLength="2000"
              placeholder="Project Details"
              formControlName="projectDetails"
              [rows]="6"
              >{{ project.comment }}</textarea
            >
          </div>
        </div>
      </div>
    </div>
    <div class="p-grid">
      <div class="p-col-12 text-right">
        <button
          pButton
          type="button"
          label="Cancel"
          class="ui-button-info"
          routerLink=""
          style="margin-right: 10px;"
        ></button>
        <button
          pButton
          type="submit"
          class="ui-button-success"
          label="Create"
        ></button>
      </div>
    </div>
  </form>
</p-card>

<p-dialog
  [visible]="showDialog"
  [dismissableMask]="false"
  [closable]="false"
  [contentStyle]="{ overflow: 'visible' }"
>
  <p-header>
    Create Project
  </p-header>
  <p-dropdown
    [options]="projectTypes"
    filter="true"
    [(ngModel)]="selectedProjectType"
    optionLabel="name"
    [style]="{ width: '100%' }"
    placeholder="Project Type..."
    [filter]="true"
  ></p-dropdown>
  <p-footer>
    <p-button
      routerLink=""
      styleClass="ui-button-raised ui-button-info"
      label="Cancel"
    ></p-button>
    <p-button
      (onClick)="onProjectTypeSelected()"
      styleClass="ui-button-raised ui-button-success"
      label="OK"
    ></p-button>
  </p-footer>
</p-dialog>
<div class="loading" *ngIf="isLoading">
  <p-progressSpinner
    [style]="{ width: '50px', height: '50px' }"
    strokeWidth="8"
    fill="#EEEEEE"
    animationDuration=".5s"
  ></p-progressSpinner>
</div>
